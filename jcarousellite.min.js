/*!
 * jCarousel Lite - v1.8.5 - 2013-09-22
 * http://kswedberg.github.com/jquery-carousel-lite/
 * Copyright (c) 2013 Karl Swedberg
 * Licensed MIT (http://kswedberg.github.com/jquery-carousel-lite/blob/master/LICENSE-MIT)
 */

(function(e){function t(e,t){return t.autoStop&&(t.circular?t.autoStop:Math.min(e,t.autoStop))}function i(e){this.id&&(this.id+=e)}e.jCarouselLite={version:"1.8.5",curr:0},e.fn.jCarouselLite=function(a){var s=e.extend(!0,{},e.fn.jCarouselLite.defaults,a),n=Math.ceil,l=Math.abs;return this.each(function(){function a(){return Y.slice(Q).slice(0,G)}function o(t,i){if(j)return!1;i=i||{};var n=Q,l=t>Q,o=i.speed||s.speed,r=i.offset||0;return s.beforeStart&&s.beforeStart.call(T,a(),l),Y.removeClass(s.activeClass),s.circular?(t>Q&&t>H-G?(Q%=z,t=Q+(i.auto?R:s.scroll),D.css(m,-Q*C.liSize-r)):Q>t&&0>t&&(Q+=z,t+=z,D.css(m,-Q*C.liSize-r)),Q=t+t%1):(0>t?t=0:t>H-N&&(t=H-N),Q=t,0===Q&&s.first&&s.first.call(this,a(),l),Q===H-N&&s.last&&s.last.call(this,a(),l),s.btnPrev&&s.$btnPrev.toggleClass(s.btnDisabledClass,0===Q),s.btnNext&&s.$btnNext.toggleClass(s.btnDisabledClass,Q===H-N)),X(Q,M),e.jCarouselLite.curr=Q,n!==Q||i.force?(j=!0,S[m]=-(Q*C.liSize),D.animate(S,o,s.easing,function(){s.afterEnd&&s.afterEnd.call(T,a(),l),j=!1}),Y.eq(Q).addClass(s.activeClass),Q):(s.afterEnd&&s.afterEnd.call(T,a(),l),Q)}var r,c,u,d,v,f,h,b,p="ontouchend"in document,C={div:{},ul:{},li:{}},g=!0,j=!1,m=s.vertical?"top":"left",S={},x=s.vertical?"height":"width",A=s.vertical?"outerHeight":"outerWidth",w=this,T=e(this),D=T.find("ul").eq(0),y=D.children("li"),z=y.length,P=s.visible,G=n(P),N=Math.floor(P),$=Math.min(s.start,z-1),L=1,E=0,M={},W={},q={},I=s.vertical?"y":"x",k=s.vertical?"x":"y",F=s.init.call(this,s,y);if(F!==!1){T.data("dirjc",L),T.data(m+"jc",T.css(m)),s.circular&&(r=y.slice(z-G).clone(!0).each(i),c=y.slice(0,G).clone(!0).each(i),D.prepend(r).append(c),$+=G,E=G),s.btnGo&&s.btnGo.length&&(b=e.isArray(s.btnGo)&&"string"==typeof s.btnGo[0]?e(s.btnGo.join()):e(s.btnGo),b.each(function(t){e(this).bind("click.jc",function(e){return e.preventDefault(),o(s.circular?P+t:t)})}),M.go=1);var X=function(e,t){e=n(e);var i=(e-E)%z,a=i+N;return t.go&&(b.removeClass(s.activeClass).removeClass(s.visibleClass),b.eq(i).addClass(s.activeClass),b.slice(i,i+N).addClass(s.visibleClass),a>b.length&&b.slice(0,a-b.length).addClass(s.visibleClass)),t.pager&&(u.removeClass(s.activeClass),u.eq(n(i/P)).addClass(s.activeClass)),i},Y=D.children("li"),H=Y.length,Q=$;e.jCarouselLite.curr=Q;var B=function(e){var t,i,a;return e?(C.div[x]="",C.li={width:"",height:""},C):(t=Y[A](!0),i=t*H,a=t*P,C.div[x]=a+"px",C.ul[x]=i+"px",C.ul[m]=-(Q*t)+"px",C.li={width:Y.width(),height:Y.height()},C.liSize=t,C)},J=function(t){var i,a,n={div:{visibility:"visible",position:"relative",zIndex:2,left:"0"},ul:{margin:"0",padding:"0",position:"relative",listStyleType:"none",zIndex:1},li:{overflow:s.vertical?"hidden":"visible","float":s.vertical?"none":"left"}};t&&(i=B(!0),T.css(i.div),D.css(i.ul),Y.css(i.li)),i=B(),s.autoCSS&&g&&(e.extend(!0,i,n),g=!1),s.autoWidth&&(a=parseInt(T.css(x),10),C.liSize=a/s.visible,i.li[x]=C.liSize-(Y[A](!0)-parseInt(Y.css(x),10)),i.ul[x]=C.liSize*H+"px",i.ul[m]=-(Q*C.liSize)+"px",i.div[x]=a),s.autoCSS&&(Y.css(i.li),D.css(i.ul),T.css(i.div))};J();var K=0,O=t(z,s),R="number"==typeof s.auto?s.auto:s.scroll,U=function(){w.setAutoAdvance=setTimeout(function(){(!O||O>K)&&(L=T.data("dirjc"),o(Q+L*R,{auto:!0}),K++,U())},s.timeout)};if(e.each(["btnPrev","btnNext"],function(t,i){s[i]&&(s["$"+i]=e.isFunction(s[i])?s[i].call(T[0]):e(s[i]),s["$"+i].bind("click.jc",function(e){e.preventDefault();var i=0===t?Q-s.scroll:Q+s.scroll;return s.directional&&T.data("dirjc",t?1:-1),o(i)}))}),s.circular||(s.btnPrev&&0===$&&s.$btnPrev.addClass(s.btnDisabledClass),s.btnNext&&$+N>=H&&s.$btnNext.addClass(s.btnDisabledClass)),s.autoPager){d=n(z/P),u=[];for(var V=0;d>V;V++)u.push('<li><a href="#">'+(V+1)+"</a></li>");u.length>1&&(u=e("<ul>"+u.join("")+"</ul>").appendTo(s.autoPager).find("li"),u.find("a").each(function(t){e(this).bind("click.jc",function(e){e.preventDefault();var i=t*P;return s.circular&&(i+=P),o(i)})}),M.pager=1)}X($,M),s.mouseWheel&&T.mousewheel&&T.bind("mousewheel.jc",function(e,t){return t>0?o(Q-s.scroll):o(Q+s.scroll)}),s.pause&&s.auto&&!p&&T.bind("mouseenter.jc",function(){T.trigger("pauseCarousel.jc")}).bind("mouseleave.jc",function(){T.trigger("resumeCarousel.jc")}),s.auto&&U(),e.jCarouselLite.vis=a,T.bind("go.jc",function(e,t,i){t===void 0&&(t="+=1");var a="string"==typeof t&&/(\+=|-=)(\d+)/.exec(t);a?t="-="===a[1]?Q-1*a[2]:Q+1*a[2]:t+=$,o(t,i)}).bind("startCarousel.jc",function(){clearTimeout(w.setAutoAdvance),w.setAutoAdvance=void 0,T.trigger("go","+="+s.scroll),U(),T.removeData("pausedjc").removeData("stoppedjc")}).bind("resumeCarousel.jc",function(e,t){if(!w.setAutoAdvance){clearTimeout(w.setAutoAdvance),w.setAutoAdvance=void 0;var i=T.data("stoppedjc");(t||!i)&&(U(),T.removeData("pausedjc"),i&&T.removeData("stoppedjc"))}}).bind("pauseCarousel.jc",function(){clearTimeout(w.setAutoAdvance),w.setAutoAdvance=void 0,T.data("pausedjc",!0)}).bind("stopCarousel.jc",function(){clearTimeout(w.setAutoAdvance),w.setAutoAdvance=void 0,T.data("stoppedjc",!0)}).bind("refreshCarousel.jc",function(){J(s.autoCSS)}).bind("endCarousel.jc",function(){w.setAutoAdvance&&(clearTimeout(w.setAutoAdvance),w.setAutoAdvance=void 0),s.btnPrev&&s.$btnPrev.addClass(s.btnDisabledClass).unbind(".jc"),s.btnNext&&s.$btnNext.addClass(s.btnDisabledClass).unbind(".jc"),s.btnGo&&e.each(s.btnGo,function(t,i){e(i).unbind(".jc")}),s.circular&&(Y.slice(0,G).remove(),Y.slice(-G).remove()),e.each([m+"jc","pausedjc","stoppedjc","dirjc"],function(e,t){T.removeData(t)}),T.unbind(".jc")}),h={touchstart:function(e){q.x=0,q.y=0,W.x=e.targetTouches[0].pageX,W.y=e.targetTouches[0].pageY,W[m]=parseFloat(D.css(m)),W.time=+new Date},touchmove:function(e){var t=e.targetTouches.length;1===t?(e.preventDefault(),q.x=e.targetTouches[0].pageX,q.y=e.targetTouches[0].pageY,S[m]=W[m]+(q[I]-W[I]),D.css(S)):(q.x=W.x,q.y=W.y)},touchend:function(){if(q.x){var e=W[I]-q[I],t=l(e),i=t>s.swipeThresholds[I],a=l(W[k]-q[k])<s.swipeThresholds[k],n=+new Date-W.time,o=s.swipeThresholds.time>n,r=e>0?"+=":"-=",c=r+s.scroll,u={force:!0};o&&i&&a?u.speed=s.speed/2:!o&&C.liSize/2>t||!i||o&&!a?c="+=0":!o&&t>C.liSize/2&&(c=Math.round(t/C.liSize),c=r+(c>s.visible?s.visible:c),u.offset=e),T.trigger("go.jc",[c,u]),q={}}},handle:function(e){e=e.originalEvent,h[e.type](e)}},p&&s.swipe&&T.bind("touchstart.jc touchmove.jc touchend.jc",h.handle),s.responsive&&(f=s.autoCSS,e(window).bind("resize",function(){f&&(D.width(2*D.width()),f=!1),clearTimeout(v),v=setTimeout(function(){T.trigger("refreshCarousel.jc"),f=s.autoCSS},100)}))}}),this},e.fn.jCarouselLite.defaults={btnPrev:null,btnNext:null,btnGo:null,autoPager:null,btnDisabledClass:"disabled",activeClass:"active",visibleClass:"vis",mouseWheel:!1,speed:200,easing:null,timeout:4e3,auto:!1,directional:!1,autoStop:!1,pause:!0,vertical:!1,circular:!0,visible:3,start:0,scroll:1,autoCSS:!0,responsive:!1,autoWidth:!1,swipe:!0,swipeThresholds:{x:80,y:40,time:150},init:function(){},first:null,last:null,beforeStart:null,afterEnd:null}})(jQuery);